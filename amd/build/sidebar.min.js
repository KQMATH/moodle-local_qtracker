define("local_qtracker/sidebar",["exports","jquery","core/templates"],(function(_exports,_jquery,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates);var _default=class{constructor(container){let show=arguments.length>1&&void 0!==arguments[1]&&arguments[1],side=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",loading=arguments.length>3&&void 0!==arguments[3]&&arguments[3],width=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"40%",margin=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0px",closable=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],options=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];_defineProperty(this,"hidden",null),_defineProperty(this,"loading",null),_defineProperty(this,"width",null),_defineProperty(this,"margin",null),_defineProperty(this,"container",null),_defineProperty(this,"closable",null),_defineProperty(this,"options",null),this.container=(0,_jquery.default)(container),this.hidden=!show,this.visible=show,this.side=side,this.loading=loading,this.width=width,this.margin=margin,this.closable=closable,this.options=options,this.mql=window.matchMedia("(min-width: 768px)"),this.mql.addEventListener("change",this.screenTest.bind(this)),this.render=this.render.bind(this)}screenTest(e){this.visible&&e.matches}async render(){let self=this,context={};this.closable&&(context.close={key:"fa-times",title:"Close",alt:"Close pane",extraclasses:"",unmappedIcon:!1}),this.options.length>0&&(context.options={trigger:{key:"fa-filter",title:"Options",alt:"Show options",extraclasses:"",unmappedIcon:!1},header:!1,items:self.options}),await _templates.default.render("local_qtracker/sidebar",context).then(((html,js)=>{_templates.default.appendNodeContents(this.container,html,js),this.setVisibility(!this.hidden),this.setLoading(this.loading),this.setSide(this.side),this.screenTest(this.mql)}))}getSide(){return this.side}getOppositeSide(){return"left"==this.side?"right":"left"}setWidth(width,width2){this.width=width,this.width2=width2,this.screenTest(this.mql)}isMobileWidth(){return!this.mql.matches}setSide(side){"right"==side?((0,_jquery.default)("#qtracker-sidebar").addClass("qtracker-sidebar-right"),(0,_jquery.default)("#qtracker-sidebar").removeClass("qtracker-sidebar-left")):"left"==side&&((0,_jquery.default)("#qtracker-sidebar").addClass("qtracker-sidebar-left"),(0,_jquery.default)("#qtracker-sidebar").removeClass("qtracker-sidebar-right"))}setTitle(html){(0,_jquery.default)(".qtracker-sidebar-title").html(html)}setLoading(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?((0,_jquery.default)(".qtracker-sidebar-content .loading").addClass("show"),this.loading=!0):((0,_jquery.default)(".qtracker-sidebar-content .loading").removeClass("show"),this.loading=!1)}empty(){(0,_jquery.default)(".qtracker-sidebar-content .qtracker-items").empty()}addTemplateItem(html,js){_templates.default.appendNodeContents(".qtracker-sidebar-content .qtracker-items",html,js)}getItems(){return(0,_jquery.default)(".qtracker-sidebar-content .qtracker-items").children()}getContainer(){return this.container}hide(){this.hidden||this.setVisibility(!1)}show(){this.hidden&&this.setVisibility(!0)}setVisibility(){let show=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];show?((0,_jquery.default)("#qtracker-sidebar").addClass("show"),(0,_jquery.default)("#page").addClass("qtracker-show-drawer-"+this.side),this.screenTest(this.mql)):((0,_jquery.default)("#qtracker-sidebar").removeClass("show"),(0,_jquery.default)("#page").removeClass("qtracker-show-drawer-"+this.side)),this.hidden=!show,this.visible=show}togglePane(){(0,_jquery.default)("#qtracker-sidebar").toggleClass("show"),this.hidden=!this.hidden}decodeHTML(html){return(new DOMParser).parseFromString(html,"text/html").documentElement.textContent}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=sidebar.min.js.map