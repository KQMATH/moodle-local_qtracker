{"version":3,"sources":["../src/question_issue_page.js"],"names":["SELECTORS","TITLE","TITLE_TEXT","TITLE_INPUT","QuestionIssuePage","courseid","questionid","issueid","Set","parseInt","issue","loadSettings","editingTitle","init","checkForParents","initSidebar","initDropdowns","registerEditTitleButtonListener","loadIssueParents","parentsData","parents","length","supersededids","map","parent","attr","_getIssueUrl","id","html","prop","join","Str","get_string","message","announce","type","notify","filterData","JSON","parse","sessionStorage","getItem","forEach","filter","add","Array","from","setItem","stringify","loadIssueChildren","childrenData","children","items","item","title","Issue","load","on","e","button","target","show","hide","val","getIssue","setTitle","save","response","status","text","bind","issuesDropdown","Dropdown","loadChildren","setItems","updateIssueAsideBlock","getActiveItems","dropdown","getRoot","DropdownEvents","search","str","criteria","startsWith","substr","push","key","value","issuesResponse","issues","renderItems","click","element","parentid","childid","active","isActiveItem","deleteIssueRelation","renderSidebarContent","setItemStatus","reset","ModalFactory","child","types","SAVE_CANCEL","body","large","create","modal","setSaveButtonText","ModalEvents","preventDefault","setIssueRelation","issueurl","closebutton","destroy","hidden","elements","size","addClass","url","relativeUrl","state","sidebar","setLoading","empty","loadIssues","userids","userid","loadUsersData","usersData","promises","issueData","userData","find","addIssueItem","self","$","when","apply","done","each","arguments","index","argument","addTemplateItem","js","applyFilter","catch","console","error","has","sidebarOptions","Sidebar","render","loadQuestionData","questionData","question","questionEditUrl","getQuestionEditUrl","link","name","getContainer","hasClass","dropdownItem","itemValue","is","delete","saveSettings","window","closeIssuesPane","toggleIssuesPane","togglePane","resetFilter","getItems","extraClasses","userurl","course","paneContext","profileimageurl","profileimageurlsmall","fullname","timecreated","description","extraclasses","Templates","then","Ajax","call","methodname","args","issuesData","ids","field","values","result","returnurl","encodeURIComponent","location","pathname","editurl","doc","DOMParser","parseFromString","documentElement","textContent","notification","selector","extend","template","append","runTemplateJS"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Class for handling question issue page.\n *\n * @module     local_qtracker/QuestionIssuePage\n * @class      QuestionIssuePage\n * @package    local_qtracker\n * @author     André Storhaug <andr3.storhaug@gmail.com>\n * @copyright  2021 NTNU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport $ from 'jquery';\nimport Templates from 'core/templates';\nimport Ajax from 'core/ajax';\nimport url from 'core/url';\nimport * as Str from 'core/str';\nimport Sidebar from 'local_qtracker/sidebar';\nimport Dropdown from 'local_qtracker/dropdown';\nimport Issue from 'local_qtracker/issue';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport DropdownEvents from 'local_qtracker/dropdown_events';\nimport { loadIssuesData } from 'local_qtracker/api_helpers';\n\nvar SELECTORS = {\n    TITLE: '[data-region=\"issuetitle\"]',\n    TITLE_TEXT: '[data-region=\"issuetitle-text\"]',\n    TITLE_INPUT: '[data-region=\"issuetitle-input\"]',\n};\n\n/**\n * Constructor\n * @constructor\n * @param {String} selector used to find triggers for the new group modal.\n * @param {int} contextid\n *\n * Each call to init gets it's own instance of this class.\n */\nclass QuestionIssuePage {\n    courseid = null;\n    questionid = null;\n    issueid = null;\n    issue = null;\n    parents = [];\n    filter = new Set(['Open', 'New'])\n\n    constructor(courseid, questionid, issueid) {\n        this.courseid = courseid;\n        this.questionid = questionid;\n        this.issueid = parseInt(issueid);\n        this.issue = null;\n        this.loadSettings()\n\n        this.editingTitle = false;\n        this.init();\n    }\n\n    async init() {\n        this.checkForParents()\n        this.initSidebar()\n        this.initDropdowns();\n        this.registerEditTitleButtonListener()\n    }\n\n    async checkForParents() {\n\n        let parentsData = await this.loadIssueParents(this.issueid);\n        if (parentsData.parents.length > 0) {\n            this.parents = parentsData.parents;\n            let supersededids = this.parents.map((parent) => {\n                return $('<a></a>')\n                    .attr(\"href\", this._getIssueUrl(parent.id))\n                    .html(\"#\" + parent.id).prop('outerHTML');\n            }).join(\", \");\n            this.notify({\n                message: await Str.get_string('issuesuperseded', 'local_qtracker', supersededids),\n                announce: false,\n                type: \"warning\",\n            }, '#qtracker-superseded');\n        }\n    }\n\n    loadSettings() {\n        let filterData = JSON.parse(sessionStorage.getItem('local_qtracker_issue_page_filter'))\n        if (filterData !== null) {\n            filterData.forEach(this.filter.add, this.filter)\n        }\n    }\n\n    saveSettings() {\n        let filterData = Array.from(this.filter);\n        sessionStorage.setItem('local_qtracker_issue_page_filter', JSON.stringify(filterData))\n    }\n\n\n    async loadChildren() {\n        let childrenData = await this.loadIssueChildren(this.issueid);\n        let children = childrenData.children;\n        let items = children.map((item) => [item.id, item.title]);\n        return items;\n    }\n\n    async getIssue() {\n        if (this.issue === null) {\n            this.issue = await Issue.load(this.issueid);\n        }\n        return this.issue;\n    }\n\n    registerEditTitleButtonListener() {\n        $(\".edittitle\").children(\"button\").on('click', async function (e) {\n            let button = $(e.target);\n            if (!this.editingTitle) {\n                button.html(await Str.get_string('save', 'core'));\n                $(SELECTORS.TITLE_INPUT).show();\n                $(SELECTORS.TITLE_TEXT).parent(\"div\").hide();\n                this.editingTitle = true;\n            } else {\n                let title = $(SELECTORS.TITLE_INPUT).val();\n                let issue = await this.getIssue();\n                issue.setTitle(title);\n                let response = await issue.save();\n                if (response.status) {\n                    button.html(await Str.get_string('edit', 'core'));\n                    $(SELECTORS.TITLE_INPUT).hide();\n                    $(SELECTORS.TITLE_TEXT).parent(\"div\").show();\n                    $(SELECTORS.TITLE_TEXT).text(title);\n                    this.editingTitle = false;\n                }\n            }\n        }.bind(this));\n    }\n\n    // aside blocks\n    async initDropdowns() {\n        let issuesDropdown = new Dropdown('#linkedissues-dropdown');\n        issuesDropdown.setItems(await this.loadChildren(), true);\n        this.updateIssueAsideBlock(issuesDropdown.getActiveItems());\n\n        // TODO: Remove the right margin of the content container when the grading panel is hidden so that it expands to full-width.\n        let dropdown = issuesDropdown;\n        dropdown.getRoot().on(DropdownEvents.search, async function (e, str) {\n            let criteria = [];\n            if (str.startsWith('#')) {\n                let id = parseInt(str.substr(1));\n                criteria.push({ key: 'id', value: id });\n            } else {\n                if (str.length > 2) str += \"%\"\n                criteria.push({ key: 'title', value: str });\n            }\n            let issuesResponse = await loadIssuesData(criteria);\n            let issues = issuesResponse.issues;\n            let items = issues.map((item) => {\n                let html = item.title + ' <span class=\"text-muted\"> #' + item.id + '</span>';\n                return [item.id, html];\n            });\n            issuesDropdown.setItems(items);\n            issuesDropdown.renderItems();\n        }.bind(this));\n\n\n        dropdown.getRoot().on(DropdownEvents.click, async function (e, element) {\n            let parentid = parseInt(this.issueid);\n            let childid = parseInt(element.attr(\"data-value\"));\n            let active = dropdown.isActiveItem(childid);\n            if (active) {\n                let response = await this.deleteIssueRelation(parentid, childid);\n                if (response.status) {\n                    this.renderSidebarContent();//TODO: update sidebar issues if exists with new status.\n                    issuesDropdown.setItemStatus(childid, !active)\n                    issuesDropdown.reset();\n                    this.updateIssueAsideBlock(issuesDropdown.getActiveItems())\n                }\n            } else {\n                let modal = await ModalFactory.create({\n                    title: await Str.get_string('subsumeissue', 'local_qtracker'),\n                    body: await Str.get_string('subsumeissueconfirm', 'local_qtracker', { child: childid, parent: parentid }),\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    large: false,\n                })\n                modal.setSaveButtonText(await Str.get_string('confirm', 'core'));\n                modal.getRoot().on(ModalEvents.save, async e => {\n                    // Don't close the modal yet.\n                    e.preventDefault();\n                    // Submit form data.\n                    let response = await this.setIssueRelation(parentid, childid);\n                    if (response.status) {\n                        this.renderSidebarContent();//TODO: update sidebar issues if exists with new status.\n                        issuesDropdown.setItemStatus(childid, !active)\n                        issuesDropdown.reset();\n                        this.updateIssueAsideBlock(issuesDropdown.getActiveItems())\n                    } else {\n                        let issueurl = $('<a></a>')\n                            .attr(\"href\", this._getIssueUrl(childid))\n                            .html(\"#\" + childid).prop('outerHTML');\n\n                        this.notify({\n                            message: await Str.get_string('errorsubsumingissue', 'local_qtracker', issueurl),\n                            announce: true,\n                            closebutton: true,\n                            type: \"error\",\n                        }, '#qtracker-notifications');\n                    }\n                    modal.destroy();\n\n                    //submitEditFormAjax(link, getBody, modal, userEnrolmentId, container.dataset);\n                });\n                // Handle hidden event.\n                modal.getRoot().on(ModalEvents.hidden, () => {\n                    // Destroy when hidden.\n                    modal.destroy();\n                });\n                // Show the modal.\n                modal.show();\n            }\n        }.bind(this))\n\n        issuesDropdown.renderItems();\n    }\n\n    async updateIssueAsideBlock(items) {\n        let elements = []\n\n        if (items.size === 0) {\n            let element = $('<div></div>')\n                .addClass(\"dropdown-item disabled\")\n                .html(await Str.get_string('noitems', 'local_qtracker'))\n                .prop('outerHTML');\n            elements.push(element)\n        }\n\n        items.forEach((html, key) => {\n            let element = $('<a></a>')\n                .addClass(\"list-item border-0 p-1\")\n                .attr(\"href\", this._getIssueUrl(key))\n                .html(html).prop('outerHTML');\n            //<div class=\"list-group-item border-0 {{state}}\">{{{text}}}</div>\n            elements.push(element);\n        });\n        $(\".linkedissues-list\").html(elements);\n    }\n\n    _getIssueUrl(issueid) {\n        let issueurl = url.relativeUrl('/local/qtracker/issue.php', {\n            courseid: this.courseid,\n            issueid: issueid,\n        });\n        return issueurl;\n    }\n\n    async renderSidebarContent() {\n        let state = null;\n        this.sidebar.setLoading(true);\n        this.sidebar.empty();\n\n        // Get issues data.\n        let issuesResponse = await this.loadIssues(this.questionid, state);\n        let issues = issuesResponse.issues;\n\n        // Get users data.\n        let userids = [...new Set(issues.map(issue => issue.userid))];\n        let usersData = await this.loadUsersData(userids);\n\n        // Render issue items.\n        let promises = [];\n        issues.forEach(async issueData => {\n            let userData = usersData.find(({ id }) => id === issueData.userid);\n            if (issueData.id == this.issueid) {\n                return;\n            }\n            promises.push(this.addIssueItem(issueData, userData));\n        });\n\n        self = this;\n        // When all issue item promises are resolved.\n        $.when.apply($, promises).done(function () {\n            self.sidebar.setLoading(false);\n            $.each(arguments, (index, argument) => {\n                self.sidebar.addTemplateItem(argument.html, argument.js);\n            });\n            self.applyFilter();\n        }).catch(e => {\n            console.error(e);\n        });\n    }\n\n    async initSidebar() {\n        let active = this.filter.has(\"Closed\");\n        let sidebarOptions = [{ \"name\": \"toggleclosed\", \"text\": \"Show closed issues\", \"value\": 0, \"checkbox\": true, \"active\": active }];\n        this.sidebar = new Sidebar('#question-issues-sidebar', true, \"left\", false, '30%', '1.25rem', false, sidebarOptions);\n\n        await this.sidebar.render();\n\n        this.sidebar.empty();\n        this.sidebar.setLoading(true);\n\n        // Get question title.\n        let questionData = await this.loadQuestionData(this.questionid);\n        let question = questionData.question;\n        let questionEditUrl = this.getQuestionEditUrl(this.courseid, this.questionid);\n        let link = $('<a></a>').attr(\"href\", questionEditUrl).html(question.name + \" #\" + question.id);\n        this.sidebar.setTitle(link);\n        this.sidebar.show();\n\n        await this.renderSidebarContent();\n\n        // Add logic to sidebar actions (dropdowns)\n        this.sidebar.getContainer().on('click', async function (e) {\n            let element = $(e.target);\n            if (element.hasClass(\"dropdown-item\")) {\n                let dropdownItem = element.attr(\"data-name\");\n                let itemValue = parseInt(element.attr(\"data-value\"));\n                switch (dropdownItem) {\n                    case \"toggleclosed\": // Sidebar toolbar filter\n                        if (element.is(':checked')) {\n                            this.filter.add('Closed');\n                            element.prop('checked', true);\n                        } else {\n                            this.filter.delete('Closed');\n                            element.prop('checked', false);\n                        }\n                        this.applyFilter();\n                        this.saveSettings();\n                        break;\n                    case \"subsume\": // Sidebar item action\n                        //TODO: add issue menu to the sidebar items\n                        let parentid = this.issueid;\n                        let childid = itemValue;\n                        let response = await this.setIssueRelation(parentid, childid);\n                        if (response.status) {\n                            this.renderSidebarContent()\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }.bind(this))\n\n        window.closeIssuesPane = function () { this.sidebar.hide() }.bind(this);\n        window.toggleIssuesPane = function () { this.sidebar.togglePane() }.bind(this);\n    }\n\n    applyFilter() {\n        this.resetFilter();\n        let self = this;\n        this.sidebar.getItems().each(function () {\n            if (!self.filter.has($(this).find(\".badge\").text())) {\n                $(this).hide();\n            }\n        });\n    }\n\n    resetFilter() {\n        this.sidebar.getItems().each(function () {\n            $(this).show();\n        });\n    }\n\n    /**\n     *\n     * @param {object} issueData\n     * @param {object} userData\n     * @return {Promise}\n     */\n    async addIssueItem(issueData, userData, extraClasses = \"\") {\n        // Fetch user data.\n        let issueurl = url.relativeUrl('/local/qtracker/issue.php', {\n            courseid: this.courseid,\n            issueid: issueData.id,\n        });\n        let userurl = url.relativeUrl('/user/view.php', {\n            course: this.courseid,\n            id: userData.id,\n        });\n\n        let actions = {\n            \"trigger\": {\n                \"key\": \"fa-ellipsis-h\",\n                \"title\": \"Options\",\n                \"alt\": \"Show options\",\n                \"extraclasses\": \"\",\n                \"unmappedIcon\": false\n            },\n            \"header\": false,\n            \"items\": [\n                { \"name\": \"subsume\", \"text\": \"Subsume\", \"value\": issueData.id },\n            ]\n        }\n        // Render issues pane\n        let paneContext = {\n            issueurl: issueurl,\n            userurl: userurl,\n            profileimageurl: userData.profileimageurlsmall,\n            fullname: userData.fullname,\n            timecreated: issueData.timecreated,\n            id: issueData.id,\n            title: issueData.title,\n            description: issueData.description,\n            extraclasses: extraClasses\n            //actions: actions // TODO: finish this\n        };\n        let state = issueData.state;\n        paneContext[state] = true;\n\n        return Templates.render('local_qtracker/sidebar_item_issue', paneContext)\n            .then(function (html, js) {\n                return { html: html, js: js };\n            });\n    }\n\n    async loadIssues(id, state = null) {\n        let criteria = [\n            { key: 'questionid', value: id },\n        ];\n        if (state) {\n            criteria.push({ key: 'state', value: state });\n        }\n        let issuesData = await Ajax.call([{\n            methodname: 'local_qtracker_get_issues',\n            args: { criteria: criteria }\n        }])[0];\n\n        return issuesData;\n    }\n\n    async loadUsersData(ids) {\n        let usersData = await Ajax.call([{\n            methodname: 'core_user_get_users_by_field',\n            args: {\n                field: 'id',\n                values: ids\n            }\n        }])[0];\n        return usersData;\n    }\n\n    async setIssueRelation(parentid, childid) {\n        let result = await Ajax.call([{\n            methodname: 'local_qtracker_set_issue_relation',\n            args: {\n                parentid: parentid,\n                childid: childid,\n            }\n        }])[0];\n        return result\n    }\n\n\n    async deleteIssueRelation(parentid, childid) {\n        let result = await Ajax.call([{\n            methodname: 'local_qtracker_delete_issue_relation',\n            args: {\n                parentid: parentid,\n                childid: childid,\n            }\n        }])[0];\n        return result\n    }\n\n    getQuestionEditUrl(courseid, questionid) {\n        let returnurl = encodeURIComponent(location.pathname + location.search);\n        let editurl = url.relativeUrl('/question/question.php', {\n            courseid: courseid,\n            id: questionid,\n            returnurl: returnurl,\n        });\n        return editurl;\n    }\n\n    decodeHTML(html) {\n        var doc = new DOMParser().parseFromString(html, \"text/html\");\n        return doc.documentElement.textContent;\n    }\n\n    async loadQuestionData(id) {\n        let userData = await Ajax.call([{\n            methodname: 'local_qtracker_get_question',\n            args: {\n                id: id\n            }\n        }])[0];\n        return userData;\n    }\n\n    async loadIssueParents(id) {\n        let userData;\n        userData = await Ajax.call([{\n            methodname: 'local_qtracker_get_issue_parents',\n            args: {\n                issueid: id\n            }\n        }])[0];\n        return userData;\n    }\n\n    async loadIssueChildren(id) {\n        let userData;\n        userData = await Ajax.call([{\n            methodname: 'local_qtracker_get_issue_children',\n            args: {\n                issueid: id\n            }\n        }])[0];\n        return userData;\n    }\n\n    notify(notification, selector = null) {\n        notification = $.extend({\n            closebutton: false,\n            announce: false,\n            type: 'error',\n            extraclasses: \"show\",\n        }, notification);\n\n        let types = {\n            'success': 'core/notification_success',\n            'info': 'core/notification_info',\n            'warning': 'core/notification_warning',\n            'error': 'core/notification_error',\n        };\n\n        let template = types[notification.type];\n        Templates.render(template, notification)\n            .then((html, js) => {\n                if (selector === null) {\n                    $('#qtracker-notifications').append(html);\n                } else {\n                    $(selector).append(html);\n                }\n                Templates.runTemplateJS(js);\n            })\n            .catch((error) => {\n                console.error(error);\n                throw error;\n            });\n    };\n}\n\nexport default QuestionIssuePage;\n"],"file":"question_issue_page.min.js"}